!function($,window,document){"use strict";Foundation.libs.topbar={name:"topbar",version:"4.3.1",settings:{index:0,stickyClass:"sticky",custom_back_text:!0,back_text:"Back",is_hover:!0,mobile_show_parent_link:!0,scrolltop:!0,init:!1},init:function(section,method,options){Foundation.inherit(this,"data_options");var self=this;return"object"==typeof method?$.extend(!0,this.settings,method):"undefined"!=typeof options&&$.extend(!0,this.settings,options),"string"!=typeof method?($(".top-bar, [data-topbar]").each(function(){$.extend(!0,self.settings,self.data_options($(this))),self.settings.$w=$(window),self.settings.$topbar=$(this),self.settings.$section=self.settings.$topbar.find("section"),self.settings.$titlebar=self.settings.$topbar.children("ul").first(),self.settings.$topbar.data("index",0);var breakpoint=$("<div class='top-bar-js-breakpoint'/>").insertAfter(self.settings.$topbar);self.settings.breakPoint=breakpoint.width(),breakpoint.remove(),self.assemble(),self.settings.is_hover&&self.settings.$topbar.find(".has-dropdown").addClass("not-click"),self.settings.$topbar.parent().hasClass("fixed")&&$("body").css("padding-top",self.outerHeight(self.settings.$topbar))}),self.settings.init||this.events(),this.settings.init):this[method].call(this,options)},timer:null,events:function(){var self=this,offst=this.outerHeight($(".top-bar, [data-topbar]"));$(this.scope).off(".fndtn.topbar").on("click.fndtn.topbar",".top-bar .toggle-topbar, [data-topbar] .toggle-topbar",function(e){var topbar=$(this).closest(".top-bar, [data-topbar]"),section=topbar.find("section, .section");topbar.children("ul").first(),e.preventDefault(),self.breakpoint()&&(self.rtl?(section.css({right:"0%"}),section.find(">.name").css({right:"100%"})):(section.css({left:"0%"}),section.find(">.name").css({left:"100%"})),section.find("li.moved").removeClass("moved"),topbar.data("index",0),topbar.toggleClass("expanded").css("height","")),topbar.hasClass("expanded")?topbar.parent().hasClass("fixed")&&(topbar.parent().removeClass("fixed"),topbar.addClass("fixed"),$("body").css("padding-top","0"),self.settings.scrolltop&&window.scrollTo(0,0)):topbar.hasClass("fixed")&&(topbar.parent().addClass("fixed"),topbar.removeClass("fixed"),$("body").css("padding-top",offst))}).on("click.fndtn.topbar",".top-bar li.has-dropdown",function(e){if(!self.breakpoint()){var li=$(this),target=$(e.target),topbar=li.closest("[data-topbar], .top-bar");topbar.data("topbar"),(!self.settings.is_hover||Modernizr.touch)&&(e.stopImmediatePropagation(),"A"===target[0].nodeName&&target.parent().hasClass("has-dropdown")&&e.preventDefault(),li.hasClass("hover")?li.removeClass("hover").find("li").removeClass("hover"):li.addClass("hover"))}}).on("click.fndtn.topbar",".top-bar .has-dropdown>a, [data-topbar] .has-dropdown>a",function(e){if(self.breakpoint()){e.preventDefault();var $this=$(this),topbar=$this.closest(".top-bar, [data-topbar]"),section=topbar.find("section, .section"),titlebar=topbar.children("ul").first(),$selectedLi=($this.next(".dropdown").outerHeight(),$this.closest("li"));topbar.data("index",topbar.data("index")+1),$selectedLi.addClass("moved"),self.rtl?(section.css({right:-(100*topbar.data("index"))+"%"}),section.find(">.name").css({right:100*topbar.data("index")+"%"})):(section.css({left:-(100*topbar.data("index"))+"%"}),section.find(">.name").css({left:100*topbar.data("index")+"%"})),topbar.css("height",self.outerHeight($this.siblings("ul"),!0)+self.height(titlebar))}}),$(window).on("resize.fndtn.topbar",function(){self.breakpoint()||$(".top-bar, [data-topbar]").css("height","").removeClass("expanded").find("li").removeClass("hover")}.bind(this)),$("body").on("click.fndtn.topbar",function(e){var parent=$(e.target).closest("[data-topbar], .top-bar");parent.length>0||$(".top-bar li, [data-topbar] li").removeClass("hover")}),$(this.scope).on("click.fndtn",".top-bar .has-dropdown .back, [data-topbar] .has-dropdown .back",function(e){e.preventDefault();var $this=$(this),topbar=$this.closest(".top-bar, [data-topbar]"),titlebar=topbar.children("ul").first(),section=topbar.find("section, .section"),$movedLi=$this.closest("li.moved"),$previousLevelUl=$movedLi.parent();topbar.data("index",topbar.data("index")-1),self.rtl?(section.css({right:-(100*topbar.data("index"))+"%"}),section.find(">.name").css({right:100*topbar.data("index")+"%"})):(section.css({left:-(100*topbar.data("index"))+"%"}),section.find(">.name").css({left:100*topbar.data("index")+"%"})),0===topbar.data("index")?topbar.css("height",""):topbar.css("height",self.outerHeight($previousLevelUl,!0)+self.height(titlebar)),setTimeout(function(){$movedLi.removeClass("moved")},300)})},breakpoint:function(){return $(document).width()<=this.settings.breakPoint||$("html").hasClass("lt-ie9")},assemble:function(){var self=this;this.settings.$section.detach(),this.settings.$section.find(".has-dropdown>a").each(function(){var $link=$(this),$dropdown=$link.siblings(".dropdown"),url=$link.attr("href");if(self.settings.mobile_show_parent_link&&url&&url.length>1)var $titleLi=$('<li class="title back js-generated"><h5><a href="#"></a></h5></li><li><a class="parent-link js-generated" href="'+url+'">'+$link.text()+"</a></li>");else var $titleLi=$('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');1==self.settings.custom_back_text?$titleLi.find("h5>a").html("&laquo; "+self.settings.back_text):$titleLi.find("h5>a").html("&laquo; "+$link.html()),$dropdown.prepend($titleLi)}),this.settings.$section.appendTo(this.settings.$topbar),this.sticky()},height:function(ul){var total=0,self=this;return ul.find("> li").each(function(){total+=self.outerHeight($(this),!0)}),total},sticky:function(){var klass="."+this.settings.stickyClass;if($(klass).length>0){var t_top,distance=$(klass).length?$(klass).offset().top:0,$window=$(window),offst=this.outerHeight($(".top-bar"));$(window).resize(function(){clearTimeout(t_top),t_top=setTimeout(function(){distance=$(klass).offset().top},105)}),$window.scroll(function(){$window.scrollTop()>distance?($(klass).addClass("fixed"),$("body").css("padding-top",offst)):$window.scrollTop()<=distance&&($(klass).removeClass("fixed"),$("body").css("padding-top","0"))})}},off:function(){$(this.scope).off(".fndtn.topbar"),$(window).off(".fndtn.topbar")},reflow:function(){}}}(Foundation.zj,this,this.document);